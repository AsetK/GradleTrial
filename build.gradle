
apply plugin : 'java'

ext.systemProperties= System.properties // or ext.env = System.getProperty("env")


dependencies {
    testCompile 'junit:junit:4.12'
}

repositories {
    mavenCentral()
}

jar {
    manifest {
        attributes 'Main-Class': 'com.epam.helloworldgradle.runner.Runner'
    }
}

import org.apache.tools.ant.filters.ReplaceTokens

processResources {
    include "**/META-INF/", "**/properties/message.properties"
    def myProps = new Properties();
    
    doFirst {
        file("src/main/resources/properties/message_${systemProperties.env}.properties").withInputStream {myProps.load(it)};
    }
    
    filesMatching("**/properties/message.properties"){
        filter(ReplaceTokens, tokens: myProps)
    }
}



